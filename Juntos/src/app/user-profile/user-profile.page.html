<ng-container *ngIf="userLoaded">

  <!-- Header -->
  <ion-header>
    <ion-toolbar>
      <ion-title *ngIf="user.userName else firstNameProfileTitle">{{user.userName}}</ion-title>
      <ion button slot="end" id="trigger-button">
        <ion-icon size="large" style="zoom:0.8" name="notifications-outline"></ion-icon>
      </ion>
      <ion-buttons slot="end" *ngIf="followFriendsIndicator">
          <ion-icon size="large" style="zoom:0.8" [name]="followFriendsIcon" (click)="determineFollowFriendsButtonFunction({followFriendsIndicator})"></ion-icon>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>

  <!--Titel Optionen-->
  <ng-template #firstNameProfileTitle>
    <ion-title *ngIf="user.firstName else standardProfileTitle">{{user.firstName}}</ion-title>
  </ng-template>

  <ng-template #standardProfileTitle>
    <ion-title>Profile</ion-title>
  </ng-template>

  <ion-popover trigger="trigger-button" [dismissOnSelect]="false">
    <ng-template>
      <ion-content>
        <ion-list>
          <ion-item [button]="true" [detail]="false">
            <ion-label>Option 1</ion-label>
          </ion-item>
          <ion-item [button]="true" [detail]="false">
            <ion-label>Option 2</ion-label>
          </ion-item>
          <ion-item [button]="true" [detail]="true" id="nested-trigger">
            <ion-label>Option 3</ion-label>
          </ion-item>
        </ion-list>
      </ion-content>
    </ng-template>
  </ion-popover>

  <!-- Profil Inhalt -->
  <ion-content >
    <ion-grid>
      <ion-row class="ion-justify-content-center ion-align-items-center">
        <ion-col size="auto">
          <ion-avatar>
            <!-- basicProfilePhoto am Ende der HTML Datei (wird nur genutzt wenn Nutzer kein Profilbild gesetzt hat)-->
            <img *ngIf="user.photoUrl; else basicProfilePhoto" alt="User avatar" src="{{user.photoUrl}}">
          </ion-avatar>
        </ion-col>
      </ion-row>
      <ion-row class="ion-justify-content-center ion-align-items-center">
        <ion-col size="4" class="ion-align-self-center" style="text-align: center">
          <!-- Name unter Bild festlegen -->
          <h2 *ngIf="user.firstName else usernameCaption">{{user.firstName}}</h2>
          <ng-template #usernameCaption>
            <h2 *ngIf="user.userName" >{{user.userName}}</h2>
          </ng-template>
          <!-- weiter mit User Bio -->
        </ion-col>
      </ion-row>
      <ion-row class="ion-justify-content-center">
        <ion-col size="12">
          <div class="userBio">
            <p>{{user["bio"]}}</p>
          </div>
        </ion-col>
      </ion-row>
      <ion-row class="ion-justify-content-center">
        <ion-col size="10">
          <ion-progress-bar value="{{socialPointsCalculated}}"></ion-progress-bar>
        </ion-col>
      </ion-row>
    </ion-grid>
    <div class="loginDiv">
      <ion-grid>
        <ion-row class="ion-justify-content-center">
          <ion-col size="12">
            <ion-segment (ionChange)="switchProfileEventAndBadges($event)" value="user">
              <ion-segment-button value="events">
                <ion-label>Events</ion-label>
              </ion-segment-button>
              <ion-segment-button value="badges">
                <ion-label>{{user["socialPoints"]}} SP</ion-label>
              </ion-segment-button>
            </ion-segment>
          </ion-col>
        </ion-row>
        <ng-container [ngSwitch]="eventAndBadgesIndicator">
          <ng-container *ngSwitchCase="'events'" >
            <ion-list lines="full" class="ion-align-items-center">
              <ion-row class="ion-align-items-center" size="12" *ngFor="let event of events; let i = index">
                <ion-col class="ion-justify-content-center" size="12">
                  <app-event-item [event]="event"></app-event-item>
                </ion-col>
              </ion-row>
            </ion-list>
          </ng-container>
          <ng-container *ngSwitchCase="'badges'" >

          </ng-container>
        </ng-container>
      </ion-grid>
    </div>
  </ion-content>
</ng-container>


<ng-template #basicProfilePhoto>
  <img alt="Basic user avatar" src="https://cdn.picpng.com/head/head-the-dummy-avatar-man-tie-72756.png">
</ng-template>
